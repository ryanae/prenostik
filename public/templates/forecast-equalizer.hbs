<div class="scenarioContainer">
    <div id="scenario-tab">
        <div class="row-fluid">
            <div class="span12">
                <div class="btn-toolbar">
                    <div class="btn-group scenario-buttons baseline">
                        <button class="btn btn-scenario active" data-section="#forecast-scenario-baseline">
                            <span class="name">Baseline</span>
                        </button>
                     </div>
                    <div class="btn-group scenario-buttons scenario">
                        {{#each scenario}}
                            <button class="btn btn-scenario" data-section="#forecast-scenario-tab{{@index}}">
                                <i class="status"></i>&nbsp;<span class="name">{{title}}</span>&nbsp;&nbsp;<i class="icon-remove-sign"></i>
                                <input id="forecastId" type="hidden" value="{{id}}">
                            </button>
                        {{/each}}
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="scenario-content" class="tab-content">
        <!--sub template-->
        <div class="row-fluid">
            <div class="span12 btn-toolbar">
                <div class="btn-group pull-right">
                    <div class="btn btn-reset-scenario">
                        <i class="icon-retweet"></i> Reset
                    </div>
                    <div class="btn btn-save-scenario">
                        <i class="icon-save"></i> Save
                    </div>
                    <div class="btn btn-rename-scenario">
                        <i class="icon-pencil"></i> Rename
                    </div>
                    <div class="btn btn-copy-scenario">
                        <i class="icon-share-alt"></i> Copy
                    </div>
                </div>
            </div>
        </div>

        <div class="tab-pane scenario baseline active" id="forecast-scenario-baseline">
            <!--todo:use row-fluid rather than table -->
            <table class="table table-striped table-semi-condensed reference-data">
                <thead>
                    <tr>
                        <th>Reference Data</th>
                        <th class="text-center">Forecast<br/>Period<br/>({{baseline.shiftType}})</th>
                        <th class="text-center">Forecast<br/>Date</th>
                        <th class="text-center">Confidence<br/>Interval</th>
                        <th class="text-center"><div class="pull-left">-200%</div><span class="avgValue">Avg</span><div class="pull-right">+200%</div></th>
                        <th>Forecast</th>
                    </tr>
                </thead>
                <tbody>
                    <tr id="factorRow-0" class="factorRow warning">
                        <td class="span3">{{baseline.factors.[0].datastreamname}}</td>
                        <td class="span1 text-center forecast-period">##</td>
                        <td class="span1 text-center forecast-date">&nbsp;</td>
                        <td class="span1 text-center alpha" data-resetvalue="95" >95%
                            <!--todo: try spin button alternative...
                            <ul class="nav">
                                <li class="dropdown active">
                                    <a class="dropdown-toggle" data-toggle="dropdown" href="#">95%&nbsp;&nbsp;<b class="caret"></b></a>
                                    <ul class="dropdown-menu">
                                        <li class="active"><a href="#fakelink">95%</a></li>
                                        <li class="active"><a href="#fakelink">90%</a></li>
                                        <li class="active"><a href="#fakelink">85%</a></li>
                                    </ul>
                                </li>
                            </ul>-->
                        </td>
                        <td class="span3">
                            <div class="forecast-slider forecast-slider-0 dependent ui-slider ui-slider-horizontal ui-widget ui-widget-content ui-corner-all" aria-disabled="false">
                                <div class="confidenceWindow" title="" data-toggle="tooltip"></div>
                            </div>
                            <div class="range range-0 muted text-center" style="width:100%;">
                                <span class="pull-left text-left minValue">0</span>
                                <span class="text-center avgValue"></span>
                                <span class="pull-right text-right maxValue"></span>
                            </div>
                        </td>
                        <td class="span3">
                            <div class="input-prepend input-append">
                                <div class="btn-group">
                                    <input class="forecast forecast-0 dependent span2" id="forecast-0" type="text" data-streamid="{{baseline.factors.[0].datastreamid}}" data-resetvalue="" data-intercept="{{baseline.intercept}}" data-residualStandardError="{{baseline.residualStandardError}}" data-degreesoffreedom="{{baseline.degreesOfFreedom}}">
                                    <button id="solve-0" class="btn solve dependent icon-star solving" type="button" data-resetvalue="true" data-original-title="Currently solving for the reference value" data-toggle="tooltip"></button>
                                </div>
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
            <!--This table for independent variables-->
            <!--todo:use row-fluid rather than table -->
            <table class="table table-striped table-semi-condensed test-data">
                <thead>
                    <tr>
                        <th>Test Data</th>
                        <th class="text-center">Time<br/>Shift<br/>({{baseline.shiftType}})</th>
                        <th class="text-center sorting_asc">&nbsp;&nbsp;&nbsp;Rank&nbsp;&nbsp;&nbsp;</th>
                        <th class="text-center">Coefficient</th>
                        <th class="text-center"><div class="pull-left">-100%</div>Avg<div class="pull-right">+100%</div></th>
                        <th>Forecast</th>
                    </tr>
                </thead>
                <tbody>
                    {{#each baseline.factors}}
                    {{#if @index}}
                    <tr id="factorRow-{{@index}}" class="factorRow">
                        <td class="span3">{{datastreamname}}</td>
                        <td class="span1 text-center">{{shiftfactor}}</td>
                        <td class="span1 text-center"><div data-toggle=tooltip data-original-title="P value: {{pvalformatted}}">{{rank}}</div></td>
                        <td class="span1 text-right">{{coefficientformatted}}</td>
                        <td class="span3">
                            <div class="forecast-slider forecast-slider-{{@index}} independent ui-slider ui-slider-horizontal ui-widget ui-widget-content ui-corner-all" aria-disabled="false"></div>
                            <div class="range range-{{@index}} muted text-center" style="width:100%;">
                                <span class="pull-left text-left minValue">0</span>
                                <span class="text-center avgValue"></span>
                                <span class="pull-right text-right maxValue"></span>
                            </div>
                        </td>
                        <td class="span3">
                            <div class="input-prepend input-append">
                                <div class="btn-group">
                                    <input class="forecast forecast-{{@index}} independent span2" id="forecast-{{@index}}" type="text" data-streamid="{{datastreamid}}" data-resetvalue="" data-coefficient="{{coefficient}}">
                                    <button id="solve-{{@index}}" class="btn solve independent icon-star-empty" type="button" data-resetvalue="" data-original-title="Click to solve for this test value" data-toggle="tooltip"></button>
                                </div>
                            </div>
                        </td>
                    </tr>
                    {{/if}}
                    {{/each}}
                </tbody>
            </table>
        </div>


        {{#each scenario}}
        <div class="tab-pane scenario user" id="forecast-scenario-tab{{@index}}">
            <!--todo:use row-fluid rather than table -->
            <table class="table table-striped table-semi-condensed reference-data">
                <thead>
                <tr>
                    <th>Reference Data</th>
                    <th class="text-center">Forecast<br/>Period<br/>({{../baseline.shiftType}})</th>
                    <th class="text-center">Forecast<br/>Date</th>
                    <th class="text-center">Confidence<br/>Interval</th>
                    <th class="text-center"><div class="pull-left">-200%</div><span class="avgValue">Avg</span><div class="pull-right">+200%</div></th>
                    <th>Forecast</th>
                </tr>
                </thead>
                <tbody>
                        <tr id="factorRow-0" class="factorRow">
                            <td class="span3">{{factors.[0].datastreamname}}</td>
                            <td class="span1 text-center forecast-period">##</td>
                            <td class="span1 text-center forecast-date">&nbsp;</td>
                            <td class="span1 text-center alpha" data-resetvalue="{{factors.[0].state.alpha}}" >95%
                                <!--todo: try spin button alternative...
                                <ul class="nav">
                                    <li class="dropdown active">
                                        <a class="dropdown-toggle" data-toggle="dropdown" href="#">95%&nbsp;&nbsp;<b class="caret"></b></a>
                                        <ul class="dropdown-menu">
                                            <li class="active"><a href="#fakelink">95%</a></li>
                                            <li class="active"><a href="#fakelink">90%</a></li>
                                            <li class="active"><a href="#fakelink">85%</a></li>
                                        </ul>
                                    </li>
                                </ul>-->
                            </td>
                            <td class="span3">
                                <div class="forecast-slider forecast-slider-0 dependent ui-slider ui-slider-horizontal ui-widget ui-widget-content ui-corner-all" aria-disabled="false" value="{{factors.[0].state.value}}">
                                    <div class="confidenceWindow" data-original-title="" data-toggle="tooltip"></div>
                                </div>
                                <div class="range range-0 muted text-center" style="width:100%;">
                                    <span class="pull-left text-left minValue">0</span>
                                    <span class="text-center avgValue"></span>
                                    <span class="pull-right text-right maxValue"></span>
                                </div>
                            </td>
                            <td class="span3">
                                <div class="input-prepend input-append">
                                    <div class="btn-group">
                                        {{#if factors.[0].state.solveId}}
                                            <input class="forecast forecast-0 dependent span2" id="forecast-0" type="text" value="" disabled="true" data-stream-id="{{factors.[0].datastreamid}}" data-resetvalue="{{factors.[0].state.value}}" data-intercept="{{intercept}}" data-residualStandardError="{{residualStandardError}}" data-degreesoffreedom="{{degreesOfFreedom}}">
                                            <button id="solve-0" class="btn solve dependent solving icon-star" type="button" data-resetvalue="true" data-original-title="Currently solving for the reference value" data-toggle="tooltip"></button>
                                        {{else}}
                                            <input class="forecast forecast-0 dependent span2" id="forecast-0" type="text" value="{{factors.[0].state.value}}" data-stream-id="{{factors.[0].datastreamid}}" data-resetvalue="{{factors.[0].state.value}}" data-intercept="{{intercept}}" data-residualStandardError="{{residualStandardError}}" data-degreesoffreedom="{{degreesOfFreedom}}">
                                            <button id="solve-0" class="btn solve dependent icon-star-empty" type="button" data-resetvalue="" data-original-title="Click to solve for the reference value" data-toggle="tooltip"></button>
                                        {{/if}}
                                    </div>
                                </div>
                            </td>
                        </tr>
                </tbody>
            </table>
            <!--This table for independent variables-->
            <!--todo:use row-fluid rather than table -->
            <table class="table table-striped table-semi-condensed tablesorter test-data">
                <thead>
                <tr>
                    <th class="">Test Data</th>
                    <th class="text-center">Time<br/>Shift<br/>({{../baseline.shiftType}})</th>
                    <th class="text-center">&nbsp;&nbsp;&nbsp;Rank&nbsp;&nbsp;&nbsp;</th>
                    <th class="text-center">Coefficient</th>
                    <th class="text-center"><div class="pull-left">-100%</div>Avg<div class="pull-right">+100%</div></th>
                    <!--<th class="text-center"> </th>-->
                    <th>Forecast</th>
                </tr>
                </thead>
                <tbody>
                {{#each factors}}
                    {{#if @index}}
                        <tr id="factorRow-{{@index}}" class="factorRow">
                            <td class="span3">{{datastreamname}}</td>
                            <td class="span1 text-center">{{shiftfactor}}</td>
                            <td class="span1 text-center">{{rank}}</td>
                            <td class="span1 text-right">{{coefficientFormatted}}</td>
                            <td class="span3">
                                <div class="forecast-slider forecast-slider-{{@index}} independent ui-slider ui-slider-horizontal ui-widget ui-widget-content ui-corner-all" aria-disabled="false" value="{{state.value}}"></div>
                                <div class="range range-{{@index}} muted text-center" style="width:100%;">
                                    <span class="pull-left text-left minValue">0</span>
                                    <span class="text-center avgValue"></span>
                                    <span class="pull-right text-right maxValue"></span>
                                </div>
                            </td>
                            <!--<td class="span1">&nbsp;</td>-->
                            <td class="span3">
                                <div class="input-prepend input-append">
                                    <div class="btn-group">
                                        {{#if state.solveId}}
                                        <input class="forecast forecast-{{@index}} independent span2" id="forecast-{{@index}}" type="text" disabled="true" data-stream-id="{{datastreamid}}" data-resetvalue="{{state.value}}" value="" data-coefficient="{{coefficient}}">
                                        <button id="solve-{{@index}}" class="btn solve independent solving icon-star" type="button" data-resetvalue="true" data-original-title="Currently solving for this test value" data-toggle="tooltip"></button>
                                        {{else}}
                                        <input class="forecast forecast-{{@index}} independent span2" id="forecast-{{@index}}" type="text" data-stream-id="{{datastreamid}}" data-resetvalue="{{state.value}}" value="{{state.value}}" data-coefficient="{{coefficient}}">
                                        <button id="solve-{{@index}}" class="btn solve independent icon-star-empty" type="button" data-resetvalue="" data-original-title="Click to solve for this test value" data-toggle="tooltip"></button>
                                        {{/if}}
                                    </div>
                                </div>
                            </td>
                        </tr>
                    {{/if}}
                {{/each}}
                </tbody>
            </table>
        </div>
        {{/each}}

    </div>
</div>
